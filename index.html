<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<link rel="manifest" href="manifest.json">
<meta name="theme-color" content="#0c2b2e">

<title>Ù…ØªØªØ¨Ø¹ Ø¹Ø¨Ø§Ø¯Ø§Øª Ø±Ù…Ø¶Ø§Ù†</title>

<style>
body {
    margin: 0;
    font-family: Tahoma, sans-serif;
    background: linear-gradient(180deg, #0c2b2e, #114b5f);
    color: white;
    text-align: center;
}

.container {
    max-width: 500px;
    margin: auto;
    padding: 20px;
}

.card {
    background: rgba(255,255,255,0.08);
    padding: 15px;
    border-radius: 15px;
    margin-top: 15px;
}

.checkbox {
    display: flex;
    justify-content: space-between;
    background: rgba(255,255,255,0.1);
    padding: 10px;
    margin: 8px 0;
    border-radius: 10px;
}

button {
    background: #f9c74f;
    border: none;
    padding: 10px 20px;
    border-radius: 10px;
    cursor: pointer;
}

.points {
    font-size: 22px;
    margin-top: 10px;
    color: #f9c74f;
}

.badge {
    font-size: 40px;
}

.history {
    text-align: right;
    max-height: 200px;
    overflow-y: auto;
}
</style>
</head>

<body>

<div class="container">
    <h2>ğŸŒ™ Ù…ØªØªØ¨Ø¹ Ø¹Ø¨Ø§Ø¯Ø§Øª Ø±Ù…Ø¶Ø§Ù†</h2>
    <div id="date"></div>

    <div class="card">
        <div class="checkbox"><label>ØµÙŠØ§Ù…</label><input type="checkbox" id="fast"></div>
        <div class="checkbox"><label>Ù‚Ø±Ø§Ø¡Ø© Ø§Ù„Ù‚Ø±Ø¢Ù†</label><input type="checkbox" id="quran"></div>
        <div class="checkbox"><label>Ù‚ÙŠØ§Ù… Ø§Ù„Ù„ÙŠÙ„</label><input type="checkbox" id="qiyam"></div>
        <div class="checkbox"><label>Ø§Ù„Ø°ÙƒØ±</label><input type="checkbox" id="dhikr"></div>

        <button onclick="saveDay()">Ø­ÙØ¸ Ø§Ù„ÙŠÙˆÙ…</button>

        <div class="points">Ø§Ù„Ù†Ù‚Ø§Ø·: <span id="points">0</span></div>
        <div class="badge" id="badge"></div>
    </div>

    <div class="card">
        <h3>Ø§Ù„Ø³Ø¬Ù„</h3>
        <div id="history"></div>
    </div>
</div>

<script>
const today = new Date().toISOString().split('T')[0];
document.getElementById("date").innerText = "Ø§Ù„ØªØ§Ø±ÙŠØ®: " + today;

if ('serviceWorker' in navigator) {
  navigator.serviceWorker.register('service-worker.js');
}

function loadData() {
  return JSON.parse(localStorage.getItem("ramadanData")) || {};
}

function saveData(data) {
  localStorage.setItem("ramadanData", JSON.stringify(data));
}

function calculatePoints(day) {
  let points = 0;
  if (day.fast) points += 10;
  if (day.quran) points += 5;
  if (day.qiyam) points += 7;
  if (day.dhikr) points += 3;
  return points;
}

function saveDay() {
  const data = loadData();

  const day = {
    fast: document.getElementById("fast").checked,
    quran: document.getElementById("quran").checked,
    qiyam: document.getElementById("qiyam").checked,
    dhikr: document.getElementById("dhikr").checked
  };

  day.points = calculatePoints(day);
  day.complete = day.fast && day.quran && day.qiyam && day.dhikr;
    if(day.complete && navigator.vibrate){
    navigator.vibrate(200);
}

  data[today] = day;
  saveData(data);
    alert("âœ… ØªÙ… Ø­ÙØ¸ Ø¹Ø¨Ø§Ø¯Ø§Øª Ø§Ù„ÙŠÙˆÙ…\nØ¨Ø§Ø±Ùƒ Ø§Ù„Ù„Ù‡ ÙÙŠÙƒ ğŸ¤²");
  display();
}

function display() {
  const data = loadData();
  let total = 0;

  const historyDiv = document.getElementById("history");
  historyDiv.innerHTML = "";

  Object.keys(data).sort().reverse().forEach(date => {
    const d = data[date];
    total += d.points;

    const item = document.createElement("div");
    item.innerHTML = `${date} â€” ${d.points} Ù†Ù‚Ø·Ø© ${d.complete ? "â­" : ""}`;
    historyDiv.appendChild(item);
  });

  document.getElementById("points").innerText = total;
  document.getElementById("badge").innerText =
    data[today]?.complete ? "â­" : "";
}

display();
</script>

</body>

</html>


